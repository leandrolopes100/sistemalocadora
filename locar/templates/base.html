{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Sistema — Locadora{% endblock %}</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#f5f8fb',
              100: '#e0edf6',
              200: '#b8d7eb',
              300: '#8fbce0',
              400: '#66a0d5',
              500: '#3d85ca',
              600: '#2f6bb0',
              700: '#23568c',
              800: '#1a4070',
              900: '#133059',
            },
            graylight: '#f6f7fb',
          },
          boxShadow: {
            soft: '0 2px 8px rgba(0,0,0,0.05)',
          }
        }
      }
    }
  </script>

  <style>
    .sidebar-collapsed .sidebar-text { display: none; }
    .sidebar-collapsed { width: 4rem !important; }
  </style>
</head>

<body class="min-h-screen bg-graylight text-slate-800">

  <!-- ✅ Mensagens de feedback -->
  {% if messages %}
    <div class="fixed top-4 inset-x-0 flex flex-col items-center space-y-2 z-50">
      {% for message in messages %}
        <div x-data="{ show: true }" x-show="show"
             x-transition
             x-init="setTimeout(() => show = false, 5000)"
             class="px-4 py-3 rounded-xl shadow-soft border w-[90%] sm:w-auto text-sm
                    {% if message.tags == 'success' %}bg-green-100 text-green-800 border-green-300{% endif %}
                    {% if message.tags == 'error' %}bg-red-100 text-red-800 border-red-300{% endif %}
                    {% if message.tags == 'warning' %}bg-yellow-100 text-yellow-800 border-yellow-300{% endif %}
                    {% if message.tags == 'info' %}bg-blue-100 text-blue-800 border-blue-300{% endif %}">
          <span class="font-medium">{{ message }}</span>
        </div>
      {% endfor %}
    </div>
  {% endif %}
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <div class="flex min-h-screen">

    <!-- ✅ Sidebar -->
    <aside id="sidebar" class="fixed md:static inset-y-0 left-0 w-56 shrink-0 bg-white/90 backdrop-blur border-r border-slate-200 flex flex-col transition-all duration-300 transform -translate-x-full md:translate-x-0 z-30 shadow-soft">

      <!-- Branding -->
      <div class="p-5 border-b border-slate-100">
        <h1 class="text-lg font-semibold tracking-tight text-brand-800">LOCAR - Veículos</h1>
        <p class="text-xs text-slate-500">Painel Administrativo</p>
      </div>

      <!-- Navegação -->
      <nav class="flex-1 p-4 overflow-y-auto">
        <ul class="space-y-1">
           <li class="pt-2 border-t border-slate-100 text-xs uppercase text-slate-400 tracking-wider">Administração</li>
          <li><a href="{% url 'dashboard' %}" class="block rounded-xl px-4 py-2.5 hover:bg-brand-50 hover:text-brand-800 {% if section == 'dashboard' %}bg-brand-100 text-brand-900 font-semibold{% endif %}">Dashboard</a></li>
          <li><a href="{% url 'cliente_list' %}" class="block rounded-xl px-4 py-2.5 hover:bg-brand-50 hover:text-brand-800 {% if section == 'clientes' %}bg-brand-100 text-brand-900 font-semibold{% endif %}">Clientes</a></li>
          <li><a href="{% url 'veiculo_list' %}" class="block rounded-xl px-4 py-2.5 hover:bg-brand-50 hover:text-brand-800 {% if section == 'veiculos' %}bg-brand-100 text-brand-900 font-semibold{% endif %}">Veículos</a></li>
          <li><a href="{% url 'locacao_list' %}" class="block rounded-xl px-4 py-2.5 hover:bg-brand-50 hover:text-brand-800 {% if section == 'locacoes' %}bg-brand-100 text-brand-900 font-semibold{% endif %}">Locações</a></li>
          <li class="pt-2 border-t border-slate-100 text-xs uppercase text-slate-400 tracking-wider">Financeiro</li>
          <li><a href="{% url 'despesa_list' %}" class="block rounded-xl px-4 py-2.5 hover:bg-brand-50 hover:text-brand-800 {% if section == 'despesas' %}bg-brand-100 text-brand-900 font-semibold{% endif %}">Despesas</a></li>
          <li><a href="{% url 'receber' %}" class="block rounded-xl px-4 py-2.5 hover:bg-brand-50 hover:text-brand-800 {% if section == 'recebimentos' %}bg-brand-100 text-brand-900 font-semibold{% endif %}">Cobranças</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Overlay para mobile -->
    <div id="overlay" class="fixed inset-0 bg-black/40 hidden z-20 md:hidden" onclick="closeSidebar()"></div>

    <!-- ✅ Conteúdo principal -->
    <div class="flex-1 flex flex-col min-w-0">

      <!-- Topbar -->
      <header class="sticky top-0 z-10 bg-white/80 backdrop-blur border-b border-slate-200 shadow-soft">
        <div class="flex items-center justify-between px-4 py-3">
          <div class="flex items-center gap-3">
            <button type="button" class="md:hidden p-2 border border-slate-200 rounded-lg" onclick="openSidebar()">☰</button>
            <div>
              <h2 class="font-semibold text-slate-800">{% block page_title %}Painel{% endblock %}</h2>
              <p class="text-xs text-slate-500">{% block page_subtitle %}{% endblock %}</p>
            </div>
          </div>
          <form action="#" method="get" class="hidden sm:block">
            <input type="text" name="q" placeholder="Buscar..." class="border border-slate-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-300 outline-none w-48" />
          </form>
        </div>
      </header>

      <!-- Conteúdo -->
      <main class="flex-1 p-4 md:p-6">
        <div class="bg-white rounded-2xl shadow-soft border border-slate-200 p-6">
          {% block content %}{% endblock %}
        </div>
      </main>

      <!-- Rodapé -->
      <footer class="p-4 text-xs text-slate-500 text-center border-t border-slate-200 bg-white/50">
        <p>Sistema de Locadora — Desenvolvido por <span class="text-brand-700 font-medium">Leandro Lopes</span></p>
      </footer>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    function openSidebar() {
      document.getElementById("sidebar").classList.remove("-translate-x-full");
      document.getElementById("overlay").classList.remove("hidden");
    }
    function closeSidebar() {
      document.getElementById("sidebar").classList.add("-translate-x-full");
      document.getElementById("overlay").classList.add("hidden");
    }
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>
