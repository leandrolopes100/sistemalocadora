{% extends 'base.html' %}
{% load static %}

{% block title %}Novo Veículo — Locadora{% endblock %}
{% block page_title %}Novo Veículo{% endblock %}
{% block page_subtitle %}Preencha os dados do veículo para cadastrá-lo no sistema.{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto mt-8 bg-white p-8 rounded-2xl shadow-md border border-gray-100">
  
  <form method="post" enctype="multipart/form-data" class="space-y-8">
    {% csrf_token %}

    <!-- Grupo: Dados Principais -->
    <div>
      <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2"> + Dados Principais</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="placa" class="block text-sm font-medium text-gray-700">Placa</label>
          <input type="text" name="placa" id="placa" placeholder="ABC1D23"
                 value="{{ form.placa.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.placa.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.placa.errors.0 }}</p>
          {% endif %}
        </div>

        <div>
          <label for="marca" class="block text-sm font-medium text-gray-700">Marca</label>
          <input type="text" name="marca" id="marca" placeholder="Ex: Toyota"
                 value="{{ form.marca.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.marca.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.marca.errors.0 }}</p>
          {% endif %}
        </div>

        <div>
          <label for="modelo" class="block text-sm font-medium text-gray-700">Modelo</label>
          <input type="text" name="modelo" id="modelo" placeholder="Ex: Corolla"
                 value="{{ form.modelo.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.modelo.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.modelo.errors.0 }}</p>
          {% endif %}
        </div>

        <div>
          <label for="ano" class="block text-sm font-medium text-gray-700">Ano</label>
          <input type="number" name="ano" id="ano" placeholder="2024"
                 value="{{ form.ano.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.ano.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.ano.errors.0 }}</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Grupo: Detalhes -->
    <div>
      <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">+ Detalhes do Veículo</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="chassi" class="block text-sm font-medium text-gray-700">Chassi</label>
          <input type="text" name="chassi" id="chassi" placeholder="Número do Chassi"
                 value="{{ form.chassi.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.chassi.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.chassi.errors.0 }}</p>
          {% endif %}
        </div>

        <div>
          <label for="km_atual" class="block text-sm font-medium text-gray-700">Km Atual</label>
          <input type="number" name="km_atual" id="km_atual" placeholder="Ex: 15000"
                 value="{{ form.km_atual.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.km_atual.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.km_atual.errors.0 }}</p>
          {% endif %}
        </div>

        <div>
          <label for="renavam" class="block text-sm font-medium text-gray-700">RENAVAM</label>
          <input type="text" name="renavam" id="renavam" placeholder="Número do RENAVAM"
                 value="{{ form.renavam.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.renavam.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.renavam.errors.0 }}</p>
          {% endif %}
        </div>

        <div>
          <label for="fipe" class="block text-sm font-medium text-gray-700">Valor FIPE (R$)</label>
          <input type="number" step="0.01" name="fipe" id="fipe" placeholder="Ex: 75000.00"
                 value="{{ form.fipe.value|default_if_none:'' }}"
                 class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none bg-white transition">
          {% if form.fipe.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.fipe.errors.0 }}</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Grupo: Documentos e Fotos -->
<div>
  <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">+ Documentos e Imagem</h3>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <!-- Documento -->
    <div class="mb-4">
      <label for="documento_veiculo" class="block text-sm font-medium text-gray-700 mb-2">
        Documento (CRLV Digital)
      </label>
      <input type="file" name="documento_veiculo" id="documento_veiculo"
             accept="image/*,application/pdf"
             class="block w-full text-sm text-slate-700
                    file:py-2 file:px-4
                    file:rounded-xl file:border-0
                    file:text-sm file:font-semibold
                    file:bg-green-700 file:text-white
                    hover:file:bg-green-800 transition" />
      {% if form.documento_veiculo.errors %}
        <p class="text-red-600 text-xs mt-1">{{ form.documento_veiculo.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Foto -->
    <div class="mb-4">
      <label for="foto_veiculo" class="block text-sm font-medium text-gray-700 mb-2">
        Foto do Veículo
      </label>
      <input type="file" name="foto_veiculo" id="foto_veiculo"
             accept="image/*"
             class="block w-full text-sm text-slate-700
                    file:py-2 file:px-4
                    file:rounded-xl file:border-0
                    file:text-sm file:font-semibold
                    file:bg-green-700 file:text-white
                    hover:file:bg-green-800 transition" />
      {% if form.foto_veiculo.errors %}
        <p class="text-red-600 text-xs mt-1">{{ form.foto_veiculo.errors.0 }}</p>
      {% endif %}
    </div>

  </div>
</div>
    <!-- Grupo: Status -->
    <div>
      <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">+ Status do Veículo</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
          <select name="status" id="status"
                  class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm shadow-sm bg-white focus:ring-2 focus:ring-yellow-400 focus:outline-none transition">
            <option value="">Selecione</option>
            {% for value, label in form.status.field.choices %}
              <option value="{{ value }}" {% if form.status.value == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
          {% if form.status.errors %}
            <p class="text-red-600 text-xs mt-1">{{ form.status.errors.0 }}</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Botões -->
    <div class="pt-6 flex flex-col sm:flex-row justify-end gap-3">
      <a href="javascript:history.back()" 
         class="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition shadow-sm w-full sm:w-auto">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
        </svg>
        Voltar
      </a>

      <button type="submit" 
              class="inline-flex items-center justify-center gap-2 rounded-xl bg-green-700 hover:bg-green-800 text-white px-5 py-3 text-sm shadow-md transition-all w-full sm:w-auto">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
        </svg>
        Salvar Veículo
      </button>
    </div>

  </form>
</div>
{% endblock %}
